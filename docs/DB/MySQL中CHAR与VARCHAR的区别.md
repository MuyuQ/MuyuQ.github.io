# MySQL中CHAR与VARCHAR的区别详解

1. **CHAR**固定长度, **VARCHAR**可变长度

2. 如果实际存入数据长度小于指定长度,**CHAR**会填充空格到指定长度,**VARCHAR**会缩短到实际长度.

3. 如果实际存入数据长度大于指定长度,两者低版本会截取,高版本会报错

4. **CHAR**效率比**VARCHAR**高,但是相对而言费存储空间. 因为**VARCHAR**会多一个字节记录长度.每次修改完数据后都会重新计算一次,导致效率变慢.

5. **CHAR**在内存和硬盘上都会按照最大的指定长度分配空间,而**VARCHAR**在硬盘上会按照实际长度分配空间,在内存上按照指定长度分配空间.这导致两个问题

   5.1 如果将varchar指定长度非常大,会导致内存占用很高,反而不利.

   5.2 如果定义varchar(30),更改前字符长度为10,系统分配了10个存储单位.但更改后字符长度变为20,还在最大长度范围内,但是原存储位置无法满足其存储需求.系统需要进行额外的操作,比如拆分和分页.

6. **MyISAM**表推荐使用**CHAR**,缺点是占用磁盘

   **InnoDB**表,推荐使用**VARCHAR**.

   如果存储的信息很短,那么推荐使用**CHAR**,  因为**VARCHAR**还有额外的开销.

   如果是长度固定的数据,比如说uid,**CHAR**更适合.

   如果是频繁改动的column,推荐使用**CHAR**,因为**VARCHAR**每次都有额外的长度计算工作.

## 核心要点总结

- **CHAR**是固定长度字符串类型，会用空格填充到指定长度；**VARCHAR**是可变长度字符串类型，只占用实际数据所需的存储空间
- 在存储效率方面，**CHAR**适用于长度相对固定的短字符串，**VARCHAR**适用于长度变化较大的字符串
- **CHAR**在读取操作上通常比**VARCHAR**更高效，但会占用更多存储空间
- **VARCHAR**需要额外的1字节（或更多）来存储字符串的实际长度，且在数据修改时需要重新计算长度
- 不同存储引擎有不同推荐：**MyISAM**表推荐使用**CHAR**，**InnoDB**表推荐使用**VARCHAR**
- 对于长度固定的数据（如UID）或频繁修改的字段，推荐使用**CHAR**以提高性能
- 使用**VARCHAR**时要注意合理设置最大长度，避免因内存分配问题影响性能
